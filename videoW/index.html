<!doctype html>
<html>
    <head>
        <title>Nagata Shachu in AR</title>
        <meta charset="UTF-8">
        <!-- Need this setting for apple devices -->
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="style.css">
        <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
        <!-- Handle Marker detection and video pause -->
        <script src="events.js"></script>
    </head>

    <body class="a-body">
      <div id="splash" style="background-color: rgba(0,0,0,0.85);">
        <div class="loading"></div>
        <div class="ns-logo">
          <img src="./assets/NSLogo_sm.png" alt="Nagata Shachu Logo">
          <h3>Stories of Nagata Shachu</h3>
          <p id="instructions">Please wait while the augmented reality experience loads.</p>
        </div>
        <div class="start-button" style="opacity: 1;">START</div>
      </div>
      <!-- Audio and Video assets will only block the scene if we set the autoplay or preload="auto" -->
        <a-scene
            vr-mode-ui="enabled: false"
            loading-screen="enabled: false;"
            arjs='sourceType: webcam; debugUIEnabled: false;'
            id="scene"
            embedded>
            <a-assets timeout="10000">
                <!-- Timeout in milliseconds - 5 seconds, default is 3secs. If timeout reaches, scene loads regardless of which assets have already loaded -->
                <!-- Tony Nguyen - Okedo Daiko -->
                <video
                    id="tnod"
                    src="assets/v/TNOD_cc.mp4"
                    preload="auto"
                    muted
                    response-type="arraybuffer"
                    loop
                    crossorigin
                    webkit-playsinline
                    playsinline></video>
                <!-- Naoya Kobayashi - Shime Daiko -->
                <video
                    id="nksd"
                    src="assets/v/NKSD_cc.mp4"
                    preload="auto"
                    muted
                    response-type="arraybuffer"
                    loop
                    crossorigin
                    webkit-playsinline
                    playsinline></video>

                <!-- Kiyoshi Nagata - Shinobue-->
                <video
                    id="kns"
                    src="./assets/v/KNS_cc.mp4"
                    preload="auto"
                    muted
                    response-type="arraybuffer"
                    loop
                    crossorigin
                    webkit-playsinline
                    playsinline>
                </video>

                <!-- Aki Takahashi - Shamisen-->
                <video
                    id="ats"
                    src="./assets/v/ATS_cc.mp4"
                    preload="auto"
                    muted
                    response-type="arraybuffer"
                    loop="false"
                    crossorigin
                    webkit-playsinline
                    playsinline>
                </video>

                <!-- Andrew Siu - Miya / Nagado Daiko-->
                <video
                    id="asnd"
                    src="./assets/v/ASND_cc.mp4"
                    preload="auto"
                    muted
                    response-type="arraybuffer"
                    loop="false"
                    crossorigin
                    webkit-playsinline
                    playsinline>
                </video>
            </a-assets>

            <a-marker
                type="pattern"
                preset="custom"
                url="assets/w/okedo.patt"
                vidhandler="video: #tnod"
                id="okedoMkr">
                <a-video
                    id="okedoMdl"
                    src="#tnod"
                    scale="1 1 1"
                    position="0 0.1 0"
                    rotation="-90 0 0">
                </a-video>
            </a-marker>

            <a-marker
                type="pattern"
                preset="custom"
                url="assets/w/shime.patt"
                vidhandler="video: #nksd"
                id="shimeMkr">
                <a-video
                    id="shimeMdl"
                    src="#nksd"
                    scale="1 1 1"
                    position="0 0.1 0"
                    rotation="-90 0 0">
                </a-video>
            </a-marker>

            <a-marker
                type="pattern"
                preset="custom"
                url="assets/w/shinobue.patt"
                vidhandler="video: #kns"
                id="shinobueMkr">
                <a-video
                    id="shinobueMdl"
                    src="#kns"
                    scale="1 1 1"
                    position="0 0.1 0"
                    rotation="-90 0 0">
                </a-video>
            </a-marker>

            <a-marker
                type="pattern"
                preset="custom"
                url="assets/w/shamisen.patt"
                vidhandler="video: #ats"
                id="shamisenMkr">
                <a-video
                    id="shamisenMdl"
                    src="#ats"
                    scale="1 1 1"
                    position="0 0.1 0"
                    rotation="-90 0 0">
                </a-video>
            </a-marker>

            <a-marker
                type="pattern"
                preset="custom"
                url="assets/w/miya.patt"
                vidhandler="video: #asnd"
                id="miyaMkr">
                <a-video
                    id="miyaMdl"
                    src="#asnd"
                    scale="1 1 1"
                    position="0 0.1 0"
                    rotation="-90 0 0">
                </a-video>
            </a-marker>
<!--
            <a-marker
                type="pattern"
                preset="custom"
                url="assets/m/marker.patt"
                id="markerA">
                <a-entity
                    id="bowser-model"
                    scale="0.005 0.005 0.005"
                    rotation="90 180 0"
                    position="0 0 0.5"
                    gltf-model="url(assets/m/asset.gltf)">
                </a-entity>
            </a-marker>-->

            <a-entity camera></a-entity>
        </a-scene>
        <script>
          window.addEventListener('click', function(){
            var a = document.querySelector('#tnod');
            var b = document.querySelector('#nksd');
            var c = document.querySelector('#kns');
            var d = document.querySelector('#ats');
            var e = document.querySelector('#asnd');
            if (a.paused == true) { a.play();} else {a.pause();}
            if (b.paused == true) { b.play();} else {b.pause();}
            if (c.paused == true) { c.play();} else {c.pause();}
            if (d.paused == true) { d.play();} else {d.pause();}
            if (e.paused == true) { e.play();} else {e.pause();}
          });
        </script>
    </body>
</html>
